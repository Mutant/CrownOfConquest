<script>
	dojo.require("dijit.form.FilteringSelect");
</script>

<h3>Currently Memorised Spells</h3>

<table class="main">
[% FOREACH spell IN memorised_spells %]
	[% IF spell.memorised_today %]
	<tr>
		<td>[% spell.spell.spell_name %]</td><td>x[% spell.memorise_count %]</td><td>(Cast [% spell.number_cast_today %] times today)</td>
	</tr>
	[% END %]
[% END %]
</table>

<h3>Spells To Memorise Tomorrow</h3>

<table class="main">
[% FOREACH spell IN memorised_spells %]
	[% IF spell.memorise_tomorrow %]
	<tr>
		<td>[% spell.spell.spell_name %]</td><td>x[% spell.memorise_count_tomorrow %]</td><td>
		<a href="[% base %]/character/unmemorise_spell?character_id=[% character.id %]&spell_id=[% spell.spell_id %]">Remove Spell</a></td>
	</tr>
	[% END %]
[% END %]
</table>

<br>

[% IF character.class.class_name == 'Mage' %]Magic[% ELSE %]Faith[% END %] 
	Points Used: [% character.spell_points_used %] / [% character.spell_points %]
<br>
<form method="post" action="[% base %]/character/memorise_spell">
<input type="hidden" name="character_id" value="[% character.id %]">
<table class="main">
<tr>
 <td>Memorise New Spell:</td>
<select name="spell_id">
	<option></option>
    [% FOREACH spell IN available_spells %]        
	    <option value="[% spell.id %]">[% spell.spell_name %] ([% spell.points %] pts)</option>
 	[% END %]
</select>
</tr><tr>
  <td>Number of time to memorise:<br><i>(Removes any spells of this<br>type you already have memorised)</i></td>
  <td valign="top"><input type="text" name="number" size="3" maxlength="2" value="1"></td>
 </tr><tr>
<td></td><td><input type="submit" value="Memorise Spell"></td>
</tr>
</table>
</form>
