<h3>Currently Memorised Spells</h3>

<table class="main">
[% FOREACH spell IN memorised_spells %]
	[% IF spell.memorised_today %]
	<tr>
		<td id="spell_[% spell.spell.id %]">[% spell.spell.spell_name %]
			<div dojoType="dijit.Tooltip"
                   connectId="spell_[% spell.spell.id %]"
                   label="[% spell.spell.description %]"></div>		
		</td><td>x[% spell.memorise_count %]</td><td>(Cast [% spell.number_cast_today %] times today)</td>

	</tr>
	[% END %]
[% END %]
</table>

[% IF character.party_id %]
<h3>Spells To Memorise Tomorrow</h3>

<form method="post" id="spells-form" action="[% base %]/character/update_spells">
<input type="hidden" name="character_id" value="[% character.id %]">
<table class="main">
[% FOREACH spell IN available_spells %]	
	[% spell_id = spell.id %]
	<tr>
		<td>[% spell.spell_name %]</td>
		<td>(<span id="spell_points_[% spell.id %]">[% spell.points %]</span> pts)
		<td>
		 <span id="mem_spell_[% spell.id %]">(?)</span>
			<div dojoType="dijit.Tooltip"
                   connectId="mem_spell_[% spell.id %]"
                   label="[% spell.description %]"></div>
		</td>
		<td>			
			<input type="text" size="3" name="mem_tomorrow_[% spell.id %]" value="[% memorised_spells_by_id.$spell_id.memorise_count_tomorrow || 0 %]"
				onkeyup="calculateSpellPoints()" autocomplete="off">
		</td>
	</tr>
[% END %]
</table>
<input type="submit" value="Update Spells">
</form>
[% END %]

<br>

[% IF character.class.class_name == 'Mage' %]Magic[% ELSE %]Faith[% END %] 
	Points Used: <span id="spell-points-used">[% character.spell_points_used %]</span> / <span id="spell-points-total">[% character.spell_points %]</span>

