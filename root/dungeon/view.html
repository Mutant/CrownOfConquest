[% PROCESS dungeon/map_vars.html %]
[%
	x = min_x - 1;
	y = min_y - 1;
%]

[% SWITCH c.session.screen_height %]
[% CASE 'large' %]
	[% min_height = '600px' %]
[% CASE 'medium' %]
	[% min_height = '500px' %]
[% CASE %]
	[% min_height = '420px' %]
[% END %]

[% SWITCH c.session.screen_width %]
[% CASE 'large' %]
	[% min_width = '750px' %]
[% CASE 'medium' %]
	[% min_width = '600px' %]
[% CASE %]
	[% min_width = '480px' %]
[% END %]

<div style="width: 90px; height: 100%; float: left; border:">&nbsp;</div>
<div style="left: 80px; width: 100%; height: 100%; min-width: [% min_width %]; min-height: [% min_height %]; float: right; overflow: auto">
<div style="position: relative;" id="dungeon_outer">
<div style="display: none" id="scroll_to">sector_[% scroll_to.x %]_[% scroll_to.y %]</div>
[% WHILE y <= max_y %]
	[% y = y+1 %]
	[% x = min_x - 1 %]
	[% WHILE x <= max_x %]
		[% x = x+1 %]
		[% sector = grid.$x.$y %]
		
		[% FILTER collapse %]
		<div style="
			left: [% (x - min_x) * size %]px; 
			top: [% (y - min_y) * size %]px;
			width: [% size %]px; 
			height: [% size %]px; 					
			position: absolute;
			"
			id="sector_[% x %]_[% y %]"
		>	
		
		[% INCLUDE dungeon/sector_inner.html %]
		
		</div>
		[% END %]
		
	[% END %]	
[% END %]
</div>
</div>