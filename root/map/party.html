[% INCLUDE top.html %]

<script>
	dojo.require("dijit.layout.TabContainer");
</script>

<div style="background: #898E73; position: relative; width: 100%">
	[% FILTER collapse %]
	<div style="position: absolute; left: 20px; top: 45%">
		[% 
			max_zoom = 8
			zoom_link = 2
		%]
		[% WHILE zoom_link <= max_zoom %]
			[% IF zoom_link == zoom_level %]
				-
			[% ELSE %]
			   <a href="?zoom_level=[% zoom_link %]&center_x=[% center_x %]&center_y=[% center_y %]" style="text-decoration: none">|</a>
			[% END %]
			<br>
			[% zoom_link = zoom_link + 1 %] 
		[% END %] 
		<br>
		<span id="party_center">[ <a href="?zoom_level=[% zoom_level %]">P</a> ]</span>
		<div 
			dojoType="dijit.Tooltip" 
			connectId="party_center"
			label="Centre on Party"></div>
	</div>
	[% END %]
	

		[% map %]
	</div>

</div>

<center>Click on a sqaure to centre the map there</center>

<h2>Landmarks</h2>

<div id="mainTabContainer" dojoType="dijit.layout.TabContainer" style="height: 100%">
    <div dojoType="dijit.layout.ContentPane" title="Towns" style="display: none">
		<h3>Known Towns</h3>
		
		<table class="main" cellpadding="5" cellspacing="5">
			<tr>
		[% FOREACH town IN known_towns %]
			<td>[% town.town_name %] ([% town.prosperity %]) ([% town.location.x %], [% town.location.y %])</td>
			[% IF loop.count % 5 == 0 %]
				</tr><tr>
			[% END %]
		[% END %]
			</tr>
		</table>
	</div>
	
	<div dojoType="dijit.layout.ContentPane" title="Dungeons" style="display: none" href="[% base %]/map/known_dungeons">
			
	</div>

[% INCLUDE bottom.html %]